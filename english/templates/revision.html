<!DOCTYPE html>
<html>
<head> 
	<title>English Document Search</title>
	<link type="text/css" rel="stylesheet" href="../static/css/index.css" />
	<link type="text/css" rel="stylesheet" href="../static/css/bootstrap.css" />
	<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
	<script type="text/javascript" src="../static/js/bootstrap.js"></script>
	<script type="text/javascript" src="../static/js/site.js"></script>
  <script language="JavaScript">
  $(document).ready(function(){
        $('#data').after('<div id="nav"></div>');
        var rowsShown = 20;
        var rowsTotal = $('#data tbody tr').length;
        var numPages = rowsTotal/rowsShown;
        for(i = 0;i < numPages;i++) {
            var pageNum = i + 1;
            $('#nav').append('<a href="#" rel="'+i+'">'+pageNum+'</a> ');
        }
        $('#data tbody tr').hide();
        $('#data tbody tr').slice(0, rowsShown).show();
        $('#nav a:first').addClass('active');
        $('#nav a').bind('click', function(){

            $('#nav a').removeClass('active');
            $(this).addClass('active');
            var currPage = $(this).attr('rel');
            var startItem = currPage * rowsShown;
            var endItem = startItem + rowsShown;
            $('#data tbody tr').css('opacity','0.0').hide().slice(startItem, endItem).
                    css('display','table-row').animate({opacity:1}, 300);
        });
    });
</script>
</head>
<body>
	<h1 id='top'>Corrections</h1>
{% if user.is_authenticated %}
  <a href="/logout/">Logout</a><br />
  {% else %}
  <a href="/register/">Register Here</a><br />
  <a href="/login/">Login</a><br />
  {% endif %}
  <div>
    <table id="data">
        {% if user.is_staff %}
      <thead>
        <tr><th>File Position</th><th>Correction</th><th>Choice 1</th>
            <th>Choice 2</th><th>Choice 3</th><th>Approve/Reject</th><th></th></tr>
      </thead>
      <tfoot></tfoot>
      <tbody>

      {% for word in word_list %}
      <tr><th>{{word.file_position}}</th><th>{{word.kwicl}}
          <span style = 'background-color: #ffff00'>{{word.keyword}}</span>
          <span style = 'background-color: #50f733'>{{word.keyword}}</span>
          {{word.kwicr}}</th><th>{{word.choice1}}</th><th>{{word.choice2}}</th>
          <th>{{word.choice3}}</th><th>{{word.correct_choice}}</th><th>
              <form action='.' method="POST">
        {% csrf_token %}
        {{ approvalform.as_table }}

</form></th>

      {% endfor %}
      {% else %}
            <thead>
        <tr><th>File Position</th><th>Correction</th><th>Choice 1</th>
            <th>Choice 2</th><th>Choice 3</th><th>Approve/Reject</th><th></th></tr>
      </thead>
      <tfoot></tfoot>
      <tbody>

      {% for word in word_list %}
      <tr><th>{{word.file_position}}</th><th>{{word.kwicl}}
          <span style = 'background-color: #ffff00'>{{word.keyword}}</span>
          <span style = 'background-color: #50f733'>{{word.keyword}}</span>
          {{word.kwicr}}</th><th>{{word.choice1}}</th><th>{{word.choice2}}</th>
          <th>{{word.choice3}}</th><th>{{word.correct_choice}}</th>

      {% endfor %}
      {% endif %}

      </tbody>
    </table>
  </div>

</body>
</html>